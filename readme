python 3.12.3
pip freeze > requirements.txt


find nginx config in 

####### signtalk backend starts #############
sudo nano /etc/nginx/sites-available/signtalk_app
#create a symlink
sudo ln -s /etc/nginx/sites-available/signtalk_app /etc/nginx/sites-enabled/

#test ngnix
sudo nginx -t

#restart nginx
sudo systemctl restart nginx

#request nginx cert
sudo certbot --nginx

#edit gunicorn.service
sudo nano /etc/systemd/system/gunicorn.service

####### signtalk backend section ends ##########

#### +++++++++++++++++++++++++++++++++++++++ #######

####### servipac backend starts ##########

sudo nano /etc/systemd/system/gunicorn_servipac.service
## then point to gunicorn socket

## restart gunicorn servipac service after any changes
sudo systemctl restart gunicorn_servipac

sudo nano /etc/nginx/sites-available/servipac

sudo ln -s /etc/nginx/sites-available/servipac /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx

sudo nano /etc/systemd/system/gunicorn_servipac.service



###### servipac backend sections ends ###########

sudo systemctl daemon-reload
sudo systemctl start gunicorn
sudo systemctl status gunicorn # Verify it is active (running)
sudo systemctl restart nginx   # Restart Nginx to be safe
sudo systemctl enable gunicorn #enable gunicorn permanently



understand setting up a django application: Client (browser) -> Nginx -> Gunicorn socket (.sock) -> Gunicorn -> Django app -> Response back


Each Django project → own Gunicorn service.

Gunicorn creates a .sock file.

.sock files go in /run/gunicorn/.

Give /run/gunicorn/ proper permissions.

Nginx reads .sock to serve website.

Each project → own service, socket, Nginx config.

Start and enable service with systemctl. 


######--- run this after updating code ---######
source venv/bin/activate
python manage.py migrate
python manage.py collectstatic --noinput
sudo systemctl restart gunicorn
sudo systemctl reload nginx

## read logs 
sudo journalctl -u daphne -f



### working signtalk backend nginx config ###
# server {
#     listen 443 ssl;
#     server_name signtalkgh.com www.signtalkgh.com;

#     ssl_certificate /etc/letsencrypt/live/signtalkgh.com/fullchain.pem;
#     ssl_certificate_key /etc/letsencrypt/live/signtalkgh.com/privkey.pem;
#     include /etc/letsencrypt/options-ssl-nginx.conf;
#     ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

#     # 1️⃣ Flutter Web Frontend
#     location / {
#         root /var/www/projects/web;
#         index index.html;
#         try_files $uri $uri/ /index.html;
#     }

#     # 2️⃣ Django REST API
#     location /api/ {
#         proxy_pass http://unix:/run/gunicorn/gunicorn.sock;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#     }

#     # 3️⃣ WebSockets for Channels/Daphne
#     location /ws/ {
#         proxy_pass http://unix:/run/daphne/daphne.sock;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection "Upgrade";
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_read_timeout 86400;
#         proxy_send_timeout 86400;
#     }

#     # 4️⃣ Media files
#     location /media/ {
#         alias /var/www/projects/datasets/;
#         expires 30d;
#     }

#     location = /favicon.ico {
#         access_log off;
#         log_not_found off;
#     }
# }

# # Redirect HTTP to HTTPS
# server {
#     listen 80;
#     server_name signtalkgh.com www.signtalkgh.com;
#     return 301 https://$host$request_uri;
# }

# server {
#     listen 80 default_server;
#     server_name 168.119.162.34;
#     return 301 https://signtalkgh.com$request_uri;
# }

